<div class="schedule-container">
    <div class="schedule" ng-repeat="(key, planning) in vm.planning" id="{{ key + 1 }}" ng-init="planningKey = key">
        <div class="heading">
            <div class="item" ng-repeat="(key, heading) in planning">
               <span ng-if="key > 0">
                    {{ heading | date:'EEEE' }} <br>
                    {{ heading | date:'d MMM' }}
               </span>
                <span ng-if="key == 0">
                    Week {{ heading | date:'ww' }}
                </span>
            </div>
        </div>

        <!-- loop through the users -->
        <div class="body">
            <div class="body-row" ng-repeat="user in vm.planningUsers[key]">
                <div class="item" ng-repeat="(key, day) in user" ng-init="today = vm.getPlanningContent(day, key, planningKey)">
                    <span ng-if="key == 0">
                        {{ day.user.real_name }}
                    </span>

                    <div class="shift" ng-if="key > 0">
                        <i class="fa fa-circle" style="color: {{ today.shift.shiftColor }}"></i> {{ today.shift.startTime | date: 'H:mm' }} - {{ today.shift.endTime | date: 'H:mm' }} <i class="fa fa-home working-home" ng-if="today.shift.home"></i>

                        <!--<div class="actions">-->
                            <!--<i class="fa fa-pencil"></i>-->
                            <!--<i class="fa fa-question"></i>-->
                        <!--</div>-->
                    </div>

                    <div class="task" ng-if="key > 0 && today.tasks[0].length != 0" ng-repeat="task in today.tasks"><span>{{ task.taskStartTime | date: 'H:mm' }} - {{ task.taskEndTime | date: 'H:mm' }}</span> {{ task.taskDescription }}</div>
                </div>
            </div>

        </div>

    </div>
</div>

